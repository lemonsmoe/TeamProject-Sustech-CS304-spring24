{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"@/utils/request\";\nexport default {\n  name: 'MyCourse',\n  components: {},\n  data() {\n    return {\n      pageSize: 5,\n      currentPage: 1,\n      courseData: [],\n      myCourseData: [],\n      query: {\n        course_id: '',\n        course_name: '',\n        course_teacher: ''\n      }\n    };\n  },\n  mounted() {},\n  created() {\n    // 在组件创建后立即发送请求\n    this.handleQuery();\n  },\n  methods: {\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    handleQuery() {\n      // 筛选课程信息\n      console.log(this.query);\n      request.post('/calender/course/get', this.query).then(res => {\n        console.log(res);\n        if (res.status == 200) {\n          this.courseData = res.data;\n          console.log(\"all course\");\n          console.log(res.data);\n          this.getMyCourse();\n        } else {}\n      });\n    },\n    getMyCourse() {\n      request.get('/calender/subscribe/get').then(res => {\n        console.log(res);\n        if (res.status == 200) {\n          console.log(\"my course\");\n          console.log(res.data);\n          let courses = res.data;\n          // this.myCourseData = courses\n\n          for (let i = 0; i < courses.length; i++) {\n            for (let j = 0; j < this.courseData.length; j++) {\n              if (courses[i] == this.courseData[j].course_id) {\n                this.myCourseData.push(this.courseData[j]);\n              }\n            }\n          }\n          console.log(this.myCourseData);\n        } else {}\n      });\n    },\n    handleDeleteCourse(index, row) {\n      const list = {\n        course_id: row.course_id\n      };\n      request.post('/calender/subscribe/delete', list).then(res => {\n        // console.log(\"交互成功\")\n        console.log(\"fetchDataDone\");\n        console.log(res);\n        if (res.status === 200) {\n          this.$message.success('取消成功');\n        } else {\n          this.$message.error(res.data.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","name","components","data","pageSize","currentPage","courseData","myCourseData","query","course_id","course_name","course_teacher","mounted","created","handleQuery","methods","handleSizeChange","val","handleCurrentChange","console","log","post","then","res","status","getMyCourse","get","courses","i","length","j","push","handleDeleteCourse","index","row","list","$message","success","error","msg"],"sources":["src/views/RiLi/MyCourse.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <div>\r\n\r\n        <el-form :inline=\"true\" :model=\"query\" class=\"demo-form-inline\" @keydown.enter.native=\"handleQuery\">\r\n                  \r\n            <el-form-item label=\"课程编码\">\r\n                <el-input v-model=\"query.course_id\" placeholder=\"请输入课程编码\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"课程名称\">\r\n                <el-input v-model=\"query.course_name\" placeholder=\"请输入课程名称\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"任课教师\">\r\n                <el-input v-model=\"query.course_teacher\" placeholder=\"请输入任课教师\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"handleQuery\">查询</el-button>\r\n            </el-form-item>\r\n            <!-- <el-form-item>\r\n                <el-button type=\"danger\" @click=\"toMenu\">返回</el-button>\r\n            </el-form-item> -->\r\n        </el-form>\r\n\r\n        <el-table :data=\"myCourseData.slice((currentPage - 1) * pageSize, currentPage * pageSize)\" stripe style=\"width: 100%; margin-bottom: 10px\">\r\n          <el-table-column type=\"index\" label=\"序号\" width = 100px :align=\"'center'\"></el-table-column>\r\n          <el-table-column prop=\"course_id\" label=\"课程编号\" :align=\"'center'\"></el-table-column>\r\n          <el-table-column prop=\"course_name\" label=\"课程名称\" :align=\"'center'\"></el-table-column>\r\n\r\n          \r\n          <el-table-column label=\"操作\" :align=\"'center'\">\r\n            <template slot-scope=\"scope\">\r\n              \r\n              <el-button @click=\"handleDeleteCourse(scope.$index, scope.row)\" type=\"text\" size=\"small\">取消订阅</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[5, 10, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"courseData.length\"\r\n        ></el-pagination>\r\n      </div>\r\n  \r\n      \r\n    </div>\r\n  </template>\r\n  <script>\r\n    import request from \"@/utils/request\";\r\n    \r\n    export default {\r\n      name: 'MyCourse',\r\n      components: {\r\n      },\r\n      data() {\r\n        return {\r\n          pageSize: 5,\r\n          currentPage: 1,\r\n          \r\n          courseData:[],\r\n          myCourseData:[],\r\n          query: {\r\n        \r\n            course_id: '',\r\n            course_name: '',\r\n            course_teacher: '',\r\n\r\n          },\r\n\r\n        }\r\n      },\r\n      mounted() {\r\n      \r\n      },\r\n      created() {\r\n        // 在组件创建后立即发送请求\r\n        this.handleQuery()\r\n  \r\n      },\r\n      methods: {\r\n        handleSizeChange(val) {\r\n          this.pageSize = val;\r\n        },\r\n        handleCurrentChange(val) {\r\n          this.currentPage = val;\r\n        },\r\n        \r\n        handleQuery() {\r\n          // 筛选课程信息\r\n          console.log(this.query)\r\n          request.post('/calender/course/get',this.query).then(res=>{\r\n            console.log(res);\r\n            if (res.status == 200) {\r\n              this.courseData = res.data;\r\n              console.log(\"all course\");\r\n              console.log(res.data);\r\n\r\n              this.getMyCourse() \r\n\r\n              \r\n            }\r\n            else{\r\n            }\r\n          })\r\n          \r\n        },\r\n        getMyCourse() {\r\n          request.get('/calender/subscribe/get').then(res=>{\r\n            console.log(res);\r\n            if (res.status == 200) {\r\n              console.log(\"my course\");\r\n              console.log(res.data);\r\n              let courses = res.data\r\n              // this.myCourseData = courses\r\n\r\n              for (let i = 0; i < courses.length; i++) {\r\n                for (let j = 0; j < this.courseData.length; j++) {\r\n                  if (courses[i] == this.courseData[j].course_id) {\r\n                    this.myCourseData.push(this.courseData[j])\r\n                  }\r\n                }\r\n              \r\n              }\r\n              console.log(this.myCourseData)\r\n            }\r\n            else{\r\n            }\r\n          })\r\n        },\r\n        handleDeleteCourse(index,row) {\r\n          const list = {\r\n            course_id: row.course_id,\r\n          }\r\n          request.post('/calender/subscribe/delete', list).then(res=>{\r\n            // console.log(\"交互成功\")\r\n            console.log(\"fetchDataDone\")\r\n            console.log(res)\r\n            if (res.status === 200) {\r\n              this.$message.success('取消成功')\r\n            } else {\r\n              this.$message.error(res.data.msg)\r\n            } \r\n          })\r\n\r\n    \r\n        },\r\n        \r\n\r\n      },\r\n        \r\n    }\r\n  </script>\r\n  \r\n  <style>\r\n  \r\n  \r\n  </style>\r\n    \r\n    "],"mappings":";AAqDA,OAAAA,OAAA;AAEA;EACAC,IAAA;EACAC,UAAA,GACA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,WAAA;MAEAC,UAAA;MACAC,YAAA;MACAC,KAAA;QAEAC,SAAA;QACAC,WAAA;QACAC,cAAA;MAEA;IAEA;EACA;EACAC,QAAA,GAEA;EACAC,QAAA;IACA;IACA,KAAAC,WAAA;EAEA;EACAC,OAAA;IACAC,iBAAAC,GAAA;MACA,KAAAb,QAAA,GAAAa,GAAA;IACA;IACAC,oBAAAD,GAAA;MACA,KAAAZ,WAAA,GAAAY,GAAA;IACA;IAEAH,YAAA;MACA;MACAK,OAAA,CAAAC,GAAA,MAAAZ,KAAA;MACAR,OAAA,CAAAqB,IAAA,8BAAAb,KAAA,EAAAc,IAAA,CAAAC,GAAA;QACAJ,OAAA,CAAAC,GAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAlB,UAAA,GAAAiB,GAAA,CAAApB,IAAA;UACAgB,OAAA,CAAAC,GAAA;UACAD,OAAA,CAAAC,GAAA,CAAAG,GAAA,CAAApB,IAAA;UAEA,KAAAsB,WAAA;QAGA,OACA,CACA;MACA;IAEA;IACAA,YAAA;MACAzB,OAAA,CAAA0B,GAAA,4BAAAJ,IAAA,CAAAC,GAAA;QACAJ,OAAA,CAAAC,GAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACAL,OAAA,CAAAC,GAAA;UACAD,OAAA,CAAAC,GAAA,CAAAG,GAAA,CAAApB,IAAA;UACA,IAAAwB,OAAA,GAAAJ,GAAA,CAAApB,IAAA;UACA;;UAEA,SAAAyB,CAAA,MAAAA,CAAA,GAAAD,OAAA,CAAAE,MAAA,EAAAD,CAAA;YACA,SAAAE,CAAA,MAAAA,CAAA,QAAAxB,UAAA,CAAAuB,MAAA,EAAAC,CAAA;cACA,IAAAH,OAAA,CAAAC,CAAA,UAAAtB,UAAA,CAAAwB,CAAA,EAAArB,SAAA;gBACA,KAAAF,YAAA,CAAAwB,IAAA,MAAAzB,UAAA,CAAAwB,CAAA;cACA;YACA;UAEA;UACAX,OAAA,CAAAC,GAAA,MAAAb,YAAA;QACA,OACA,CACA;MACA;IACA;IACAyB,mBAAAC,KAAA,EAAAC,GAAA;MACA,MAAAC,IAAA;QACA1B,SAAA,EAAAyB,GAAA,CAAAzB;MACA;MACAT,OAAA,CAAAqB,IAAA,+BAAAc,IAAA,EAAAb,IAAA,CAAAC,GAAA;QACA;QACAJ,OAAA,CAAAC,GAAA;QACAD,OAAA,CAAAC,GAAA,CAAAG,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAY,QAAA,CAAAC,OAAA;QACA;UACA,KAAAD,QAAA,CAAAE,KAAA,CAAAf,GAAA,CAAApB,IAAA,CAAAoC,GAAA;QACA;MACA;IAGA;EAGA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}