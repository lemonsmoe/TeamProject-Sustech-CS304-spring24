{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  name: 'Teacher',\n  components: {},\n  data() {\n    return {\n      teacherData: [],\n      addDDL: false,\n      ddlform: {\n        course_id: '',\n        ddl_time: '',\n        ddl_title: '',\n        ddl_content: ''\n      },\n      ageOptions: Array.from({\n        length: 100\n      }, (_, i) => i + 1) // 年龄选项从1到100\n    };\n  },\n  mounted() {},\n  created() {\n    // 在组件创建后立即发送请求\n    this.getAllTutor();\n  },\n  methods: {\n    getAllTutor() {\n      // 获取所有老师信息\n      request.get('/tutorial/tutors/get').then(res => {\n        console.log(res);\n        if (res.status == 200) {\n          this.teacherData = res.data;\n          console.log(res.data);\n        } else {}\n      });\n    },\n    handleAddTutor() {\n      // 添加老师\n      this.addteacher = true;\n      this.teacherform.name = '';\n      this.teacherform.subject = '';\n      this.teacherform.age = '';\n      this.teacherform.gender = '';\n      this.teacherform.email = '';\n    },\n    confirmAddTutor() {\n      // 确认添加（更新表格）\n\n      //判断是否teacherform所有信息都填写了\n      if (this.teacherform.name === '' || this.teacherform.subject === '' || this.teacherform.gender === '' || this.teacherform.age === '' || this.teacherform.email === '') {\n        this.$message.error('请填写完整信息');\n        return;\n      }\n      // 判断邮箱格式是否正确\n      const emailRegex = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/;\n      if (!emailRegex.test(this.teacherform.email)) {\n        this.$message.error('请输入正确的邮箱地址');\n        return;\n      }\n      const list = {\n        'name': this.teacherform.name,\n        'subject': this.teacherform.subject,\n        'gender': this.teacherform.gender,\n        'age': this.teacherform.age,\n        'email': this.teacherform.email\n      };\n      request.post('/tutorial/tutors/add', list).then(res => {\n        // console.log(\"交互成功\")\n        console.log(\"fetchDataDone\");\n        console.log(res);\n        if (res.status === 200) {\n          this.$message.success('添加成功');\n          this.getAllTutor();\n        } else {\n          this.$message.error(res.data.msg);\n        }\n      });\n      this.addteacher = false;\n    },\n    cancelAddTutor() {\n      // 取消添加\n      this.addteacher = false;\n    },\n    handleDeleteTutor(index, row) {\n      // 前端删除\n      this.tableData.splice(index, 1);\n\n      // 后端删除\n      let tutor_id = row.tutor_id;\n      request.post('/tutorial/tutors/delete', {\n        tutor_id: tutor_id\n      }).then(res => {\n        console.log(res);\n        if (res.status === 200) {\n          this.$message.success('删除成功');\n        } else {\n          this.$message.error(res.data.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","name","components","data","teacherData","addDDL","ddlform","course_id","ddl_time","ddl_title","ddl_content","ageOptions","Array","from","length","_","i","mounted","created","getAllTutor","methods","get","then","res","console","log","status","handleAddTutor","addteacher","teacherform","subject","age","gender","email","confirmAddTutor","$message","error","emailRegex","test","list","post","success","msg","cancelAddTutor","handleDeleteTutor","index","row","tableData","splice","tutor_id"],"sources":["src/views/GuanLi/Course.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <div>\r\n        <el-table :data=\"teacherData\" stripe style=\"width: 100%; margin-bottom: 10px\">\r\n          <el-table-column type=\"index\" label=\"序号\" width = 100px :align=\"'center'\"></el-table-column>\r\n          <el-table-column prop=\"name\" label=\"老师姓名\" :align=\"'center'\"></el-table-column>\r\n          <el-table-column prop=\"subject\" label=\"教授课程\" :align=\"'center'\"></el-table-column>\r\n          <el-table-column prop=\"gender\" label=\"老师性别\" :align=\"'center'\"></el-table-column>\r\n          <el-table-column prop=\"age\" label=\"老师年龄\" :align=\"'center'\"></el-table-column>\r\n          <el-table-column prop=\"email\" label=\"老师邮箱\" width = 350px :align=\"'center'\"></el-table-column>\r\n          <el-table-column label=\"操作\" :align=\"'center'\">\r\n            <template slot-scope=\"scope\">\r\n              \r\n              <el-button @click=\"handleAddDDL(scope.$index, scope.row)\" type=\"text\" size=\"small\">布置作业</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n  \r\n      <div>\r\n  \r\n        <!-- 添加新DDL -->\r\n        <el-dialog :visible.sync=\"addDDL\" width=\"600px\">\r\n          <el-form ref=\"ddlform\" :model=\"form\" label-width=\"80px\">\r\n            \r\n            <el-form-item label=\"老师姓名\">\r\n              <el-input v-model=\"teacherform.name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"教授课程\">\r\n              <el-input v-model=\"teacherform.subject\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"老师性别\">\r\n              <el-select v-model=\"teacherform.gender\" placeholder=\"请选择性别\">\r\n                <el-option label=\"男\" value=\"男\"></el-option>\r\n                <el-option label=\"女\" value=\"女\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"老师年龄\">\r\n              <el-select v-model=\"teacherform.age\" placeholder=\"请选择年龄\">\r\n                <el-option v-for=\"age in ageOptions\" :key=\"age\" :label=\"age\" :value=\"age\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"老师邮箱\">\r\n              <el-input v-model=\"teacherform.email\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n      \r\n          <el-button type=\"primary\" @click=\"confirmAddTutor\" :align=\"'center'\">立即创建</el-button>\r\n          <el-button type=\"info\" @click=\"cancelAddTutor\" :align=\"'center'\">取消</el-button>\r\n        </el-dialog>\r\n      \r\n      </div>\r\n    </div>\r\n  </template>\r\n  <script>\r\n    import request from \"@/utils/request\";\r\n    \r\n    export default {\r\n      name: 'Teacher',\r\n      components: {\r\n      },\r\n      data() {\r\n        return {\r\n          \r\n          teacherData:[],\r\n  \r\n          addDDL:false,\r\n  \r\n          ddlform: {\r\n            course_id: '',\r\n            ddl_time: '',\r\n            ddl_title: '',\r\n            ddl_content: '',\r\n          },\r\n  \r\n  \r\n          ageOptions: Array.from({ length: 100 }, (_, i) => i + 1), // 年龄选项从1到100\r\n        }\r\n      },\r\n      mounted() {\r\n      \r\n      },\r\n      created() {\r\n        // 在组件创建后立即发送请求\r\n        this.getAllTutor();\r\n  \r\n      },\r\n      methods: {\r\n        getAllTutor() {\r\n          // 获取所有老师信息\r\n          request.get('/tutorial/tutors/get').then(res=>{\r\n            console.log(res);\r\n            if (res.status == 200) {\r\n              this.teacherData = res.data;\r\n              console.log(res.data);\r\n    \r\n            }\r\n            else{\r\n    \r\n            }\r\n            \r\n          })\r\n        },\r\n        handleAddTutor() {\r\n          // 添加老师\r\n          this.addteacher = true\r\n    \r\n          this.teacherform.name = ''\r\n          this.teacherform.subject = ''\r\n          this.teacherform.age = ''\r\n          this.teacherform.gender = ''\r\n          this.teacherform.email = ''\r\n    \r\n        },\r\n        confirmAddTutor(){\r\n          // 确认添加（更新表格）\r\n    \r\n          //判断是否teacherform所有信息都填写了\r\n          if (this.teacherform.name === ''\r\n          || this.teacherform.subject === ''\r\n          || this.teacherform.gender === ''\r\n          || this.teacherform.age === ''\r\n          || this.teacherform.email === '') {\r\n            this.$message.error('请填写完整信息')\r\n            return\r\n          }\r\n          // 判断邮箱格式是否正确\r\n          const emailRegex = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/;\r\n          if (!emailRegex.test(this.teacherform.email)) {\r\n            this.$message.error('请输入正确的邮箱地址');\r\n            return;\r\n          }\r\n    \r\n          const list = {\r\n            'name': this.teacherform.name,\r\n            'subject': this.teacherform.subject,\r\n            'gender': this.teacherform.gender,\r\n            'age': this.teacherform.age,\r\n            'email': this.teacherform.email\r\n          }\r\n    \r\n          request.post('/tutorial/tutors/add', list).then(res=>{\r\n            // console.log(\"交互成功\")\r\n            console.log(\"fetchDataDone\")\r\n            console.log(res)\r\n            if (res.status === 200) {\r\n              this.$message.success('添加成功')\r\n              this.getAllTutor()\r\n            } else {\r\n              this.$message.error(res.data.msg)\r\n            }\r\n            \r\n          })\r\n          \r\n          this.addteacher = false\r\n        },\r\n        \r\n        cancelAddTutor(){\r\n          // 取消添加\r\n          this.addteacher = false\r\n        },\r\n  \r\n        handleDeleteTutor(index, row) {\r\n          // 前端删除\r\n          this.tableData.splice(index, 1)\r\n          \r\n          // 后端删除\r\n          let tutor_id = row.tutor_id\r\n          request.post('/tutorial/tutors/delete', {\r\n            tutor_id: tutor_id\r\n          }).then(res => {\r\n            console.log(res)\r\n            if (res.status === 200) {\r\n              this.$message.success('删除成功')\r\n            } else {\r\n              this.$message.error(res.data.msg)\r\n            }\r\n          })\r\n        }, \r\n  \r\n      },\r\n        \r\n    }\r\n  </script>\r\n  \r\n  <style>\r\n  \r\n  \r\n  </style>\r\n    \r\n    "],"mappings":"AAuDA,OAAAA,OAAA;AAEA;EACAC,IAAA;EACAC,UAAA,GACA;EACAC,KAAA;IACA;MAEAC,WAAA;MAEAC,MAAA;MAEAC,OAAA;QACAC,SAAA;QACAC,QAAA;QACAC,SAAA;QACAC,WAAA;MACA;MAGAC,UAAA,EAAAC,KAAA,CAAAC,IAAA;QAAAC,MAAA;MAAA,IAAAC,CAAA,EAAAC,CAAA,KAAAA,CAAA;IACA;EACA;EACAC,QAAA,GAEA;EACAC,QAAA;IACA;IACA,KAAAC,WAAA;EAEA;EACAC,OAAA;IACAD,YAAA;MACA;MACAnB,OAAA,CAAAqB,GAAA,yBAAAC,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA,IAAAA,GAAA,CAAAG,MAAA;UACA,KAAAtB,WAAA,GAAAmB,GAAA,CAAApB,IAAA;UACAqB,OAAA,CAAAC,GAAA,CAAAF,GAAA,CAAApB,IAAA;QAEA,OACA,CAEA;MAEA;IACA;IACAwB,eAAA;MACA;MACA,KAAAC,UAAA;MAEA,KAAAC,WAAA,CAAA5B,IAAA;MACA,KAAA4B,WAAA,CAAAC,OAAA;MACA,KAAAD,WAAA,CAAAE,GAAA;MACA,KAAAF,WAAA,CAAAG,MAAA;MACA,KAAAH,WAAA,CAAAI,KAAA;IAEA;IACAC,gBAAA;MACA;;MAEA;MACA,SAAAL,WAAA,CAAA5B,IAAA,WACA,KAAA4B,WAAA,CAAAC,OAAA,WACA,KAAAD,WAAA,CAAAG,MAAA,WACA,KAAAH,WAAA,CAAAE,GAAA,WACA,KAAAF,WAAA,CAAAI,KAAA;QACA,KAAAE,QAAA,CAAAC,KAAA;QACA;MACA;MACA;MACA,MAAAC,UAAA;MACA,KAAAA,UAAA,CAAAC,IAAA,MAAAT,WAAA,CAAAI,KAAA;QACA,KAAAE,QAAA,CAAAC,KAAA;QACA;MACA;MAEA,MAAAG,IAAA;QACA,aAAAV,WAAA,CAAA5B,IAAA;QACA,gBAAA4B,WAAA,CAAAC,OAAA;QACA,eAAAD,WAAA,CAAAG,MAAA;QACA,YAAAH,WAAA,CAAAE,GAAA;QACA,cAAAF,WAAA,CAAAI;MACA;MAEAjC,OAAA,CAAAwC,IAAA,yBAAAD,IAAA,EAAAjB,IAAA,CAAAC,GAAA;QACA;QACAC,OAAA,CAAAC,GAAA;QACAD,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA,IAAAA,GAAA,CAAAG,MAAA;UACA,KAAAS,QAAA,CAAAM,OAAA;UACA,KAAAtB,WAAA;QACA;UACA,KAAAgB,QAAA,CAAAC,KAAA,CAAAb,GAAA,CAAApB,IAAA,CAAAuC,GAAA;QACA;MAEA;MAEA,KAAAd,UAAA;IACA;IAEAe,eAAA;MACA;MACA,KAAAf,UAAA;IACA;IAEAgB,kBAAAC,KAAA,EAAAC,GAAA;MACA;MACA,KAAAC,SAAA,CAAAC,MAAA,CAAAH,KAAA;;MAEA;MACA,IAAAI,QAAA,GAAAH,GAAA,CAAAG,QAAA;MACAjD,OAAA,CAAAwC,IAAA;QACAS,QAAA,EAAAA;MACA,GAAA3B,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA,IAAAA,GAAA,CAAAG,MAAA;UACA,KAAAS,QAAA,CAAAM,OAAA;QACA;UACA,KAAAN,QAAA,CAAAC,KAAA,CAAAb,GAAA,CAAApB,IAAA,CAAAuC,GAAA;QACA;MACA;IACA;EAEA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}