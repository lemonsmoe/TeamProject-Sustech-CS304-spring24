{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  name: 'Workshop',\n  components: {},\n  data() {\n    return {\n      teacherData: [],\n      workshopData: [],\n      addworkshop: false,\n      workshopform: {\n        tutor_id: '',\n        subject: '',\n        content: '',\n        date: '',\n        time: '',\n        location: ''\n      },\n      timeSlots: ['8:00 - 9:50', '10:20 - 12:10', '14:00 - 15:50', '16:20 - 18:10']\n    };\n  },\n  mounted() {},\n  created() {\n    // 在组件创建后立即发送请求\n    this.getAllTutor();\n    this.getAllWorkshop();\n  },\n  methods: {\n    getAllTutor() {\n      // 获取所有老师信息\n      request.get('/tutorial/tutors/get').then(res => {\n        console.log(res);\n        if (res.status == 200) {\n          this.teacherData = res.data;\n          console.log(res.data);\n        } else {}\n      });\n    },\n    getAllWorkshop() {\n      // 获取所有习题课信息\n      request.get('/tutorial/workshops/get').then(res => {\n        console.log(res);\n        console.log(\"workshopData\");\n        if (res.status == 200) {\n          this.workshopData = res.data;\n          console.log(res.data);\n        } else {}\n      });\n    },\n    handleAddWorkshop() {\n      // 添加习题课\n      this.addworkshop = true;\n      this.workshop.tutor_id = '';\n      this.workshop.subject = '';\n      this.workshop.content = '';\n      this.workshop.date = '';\n      this.workshop.time = '';\n      this.workshop.location = '';\n    },\n    confirmAddWorkshop() {\n      // 确认添加（更新表格）\n\n      //判断是否所有信息都填写了\n      if (this.workshopform.tutor_id === '' || this.workshopform.subject === '' || this.workshopform.content === '' || this.workshopform.date === '' || this.workshopform.time === '' || this.workshopform.location === '') {\n        this.$message.error('请填写完整信息');\n        return;\n      }\n      var list = {\n        'tutor_id': this.workshopform.tutor_id,\n        'subject': this.workshopform.subject,\n        'content': this.workshopform.content,\n        'date': this.workshopform.date,\n        'time': this.workshopform.time,\n        'location': this.workshopform.location\n      };\n      request.post('/tutorial/workshops/add', list).then(res => {\n        // console.log(\"交互成功\")\n        console.log(\"fetchDataDone\");\n        console.log(res);\n        if (res.status === 200) {\n          this.$message.success('添加成功');\n          this.getAllWorkshop();\n        } else {\n          this.$message.error(res.data.msg);\n        }\n      });\n      this.addworkshop = false;\n    },\n    cancelAddWorkshop() {\n      // 取消添加\n      this.addworkshop = false;\n    },\n    handleDelete(index, row) {\n      // 前端删除\n      this.tableData.splice(index, 1);\n\n      // 后端删除\n      let workshop_id = row.workshop_id;\n      request.post('/tutorial/workshops/delete', {\n        workshop_id: workshop_id\n      }).then(res => {\n        console.log(res);\n        if (res.status === 200) {\n          this.$message.success('删除成功');\n        } else {\n          this.$message.error(res.data.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","name","components","data","teacherData","workshopData","addworkshop","workshopform","tutor_id","subject","content","date","time","location","timeSlots","mounted","created","getAllTutor","getAllWorkshop","methods","get","then","res","console","log","status","handleAddWorkshop","workshop","confirmAddWorkshop","$message","error","list","post","success","msg","cancelAddWorkshop","handleDelete","index","row","tableData","splice","workshop_id"],"sources":["src/views/GuanLi/Workshop.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <el-button type=\"primary\" @click=\"handleAddWorkshop\">添加习题课</el-button>\r\n\r\n      <el-table :data=\"workshopData\" stripe style=\"width: 100%; margin-bottom: 10px\">\r\n        <el-table-column type=\"index\" label=\"序号\" :align=\"'center'\"></el-table-column>\r\n        <el-table-column prop=\"tutor_name\" label=\"老师姓名\" :align=\"'center'\"></el-table-column>\r\n        <el-table-column prop=\"subject\" label=\"教授课程\" :align=\"'center'\"></el-table-column>\r\n        <el-table-column prop=\"content\" label=\"课程内容\" :align=\"'center'\"></el-table-column>\r\n        <el-table-column prop=\"time_start\" label=\"开始时间\" :align=\"'center'\"></el-table-column>\r\n        <el-table-column prop=\"time_end\" label=\"结束时间\" :align=\"'center'\"></el-table-column>\r\n        <el-table-column prop=\"location\" label=\"地点\" :align=\"'center'\"></el-table-column>\r\n        <el-table-column label=\"操作\" :align=\"'center'\">\r\n          <template slot-scope=\"scope\">\r\n\r\n            <el-button @click=\"handleDelete(scope.$index, scope.row)\" type=\"text\" size=\"small\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <div>\r\n      <!-- 添加新习题课 -->\r\n      <el-dialog :visible.sync=\"addworkshop\" width=\"600px\">\r\n        <el-form ref=\"workshopform\" :model=\"form\" label-width=\"80px\">\r\n          \r\n          <el-form-item label=\"老师姓名\">\r\n            <!-- <el-input v-model=\"workshopform.tutor_id\"></el-input> -->\r\n            <el-select v-model=\"workshopform.tutor_id\" placeholder=\"请选择老师\">\r\n              <el-option\r\n                v-for=\"item in teacherData\"\r\n                :key=\"item.tutor_id\"\r\n                :label=\"item.tutor_id+': '+item.name\"\r\n                :value=\"item.tutor_id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"教授课程\">\r\n            <el-input v-model=\"workshopform.subject\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"课程内容\">\r\n            <el-input v-model=\"workshopform.content\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"课程日期\">\r\n            <el-date-picker\r\n              v-model=\"workshopform.date\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n              :disabled-date=\"disabledDate\"\r\n            ></el-date-picker>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"课程时间\">\r\n            <el-select v-model=\"workshopform.time\" placeholder=\"选择时间段\">\r\n              <el-option\r\n                v-for=\"(time, index) in timeSlots\"\r\n                :key=\"index\"\r\n                :label=\"time\"\r\n                :value=\"time\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"地点\">\r\n            <el-input v-model=\"workshopform.location\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <el-button type=\"primary\" @click=\"confirmAddWorkshop\" :align=\"'center'\">立即创建</el-button>\r\n        <el-button type=\"info\" @click=\"cancelAddWorkshop\" :align=\"'center'\">取消</el-button>\r\n      </el-dialog>\r\n  \r\n    \r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import request from \"@/utils/request\";\r\n  \r\n  export default {\r\n    name: 'Workshop',\r\n    components: {\r\n    },\r\n    data() {\r\n      return {\r\n        teacherData:[],\r\n        workshopData:[],\r\n        addworkshop:false,\r\n        workshopform: {\r\n          tutor_id: '',\r\n          subject: '',\r\n          content: '',\r\n          date: '',\r\n          time: '',\r\n          location: ''\r\n        },\r\n        timeSlots: ['8:00 - 9:50', '10:20 - 12:10', '14:00 - 15:50', '16:20 - 18:10'],\r\n\r\n      }\r\n    },\r\n    mounted() {\r\n    \r\n    },\r\n    created() {\r\n      // 在组件创建后立即发送请求\r\n      this.getAllTutor()\r\n      this.getAllWorkshop()\r\n\r\n    },\r\n    methods: {\r\n      getAllTutor() {\r\n        // 获取所有老师信息\r\n        request.get('/tutorial/tutors/get').then(res=>{\r\n          console.log(res);\r\n          if (res.status == 200) {\r\n            this.teacherData = res.data;\r\n            console.log(res.data);\r\n  \r\n          }\r\n          else{\r\n  \r\n          }\r\n          \r\n        })\r\n      },\r\n      getAllWorkshop() {\r\n        // 获取所有习题课信息\r\n        request.get('/tutorial/workshops/get').then(res=>{\r\n          console.log(res);\r\n          console.log(\"workshopData\")\r\n          if (res.status == 200) {\r\n            \r\n            this.workshopData = res.data;\r\n            console.log(res.data);\r\n          }\r\n          else{\r\n\r\n          }\r\n          \r\n        })\r\n      },\r\n      handleAddWorkshop() {\r\n        // 添加习题课\r\n        this.addworkshop = true\r\n\r\n        this.workshop.tutor_id = ''\r\n        this.workshop.subject = ''\r\n        this.workshop.content = ''\r\n        this.workshop.date = ''\r\n        this.workshop.time = ''\r\n        this.workshop.location = ''\r\n      },\r\n      confirmAddWorkshop(){\r\n        // 确认添加（更新表格）\r\n\r\n        //判断是否所有信息都填写了\r\n        if (this.workshopform.tutor_id === '' \r\n        || this.workshopform.subject === '' \r\n        || this.workshopform.content === '' \r\n        || this.workshopform.date === '' \r\n        || this.workshopform.time === '' \r\n        || this.workshopform.location === '') {\r\n          this.$message.error('请填写完整信息')\r\n          return\r\n        }\r\n\r\n        var list = {\r\n          'tutor_id': this.workshopform.tutor_id,\r\n          'subject': this.workshopform.subject,\r\n          'content': this.workshopform.content,\r\n          'date': this.workshopform.date,\r\n          'time': this.workshopform.time,\r\n          'location': this.workshopform.location\r\n        }\r\n\r\n        request.post('/tutorial/workshops/add', list).then(res=>{\r\n          // console.log(\"交互成功\")\r\n          console.log(\"fetchDataDone\")\r\n          console.log(res)\r\n          if (res.status === 200) {\r\n            this.$message.success('添加成功')\r\n            this.getAllWorkshop()\r\n          } else {\r\n            this.$message.error(res.data.msg)\r\n          }\r\n          \r\n        })\r\n        \r\n        this.addworkshop = false\r\n      },\r\n      \r\n      cancelAddWorkshop(){\r\n        // 取消添加\r\n        this.addworkshop = false\r\n      },\r\n\r\n      handleDelete(index, row) {\r\n        // 前端删除\r\n        this.tableData.splice(index, 1)\r\n        \r\n        // 后端删除\r\n        let workshop_id = row.workshop_id\r\n        request.post('/tutorial/workshops/delete', {\r\n          workshop_id: workshop_id\r\n        }).then(res => {\r\n          console.log(res)\r\n          if (res.status === 200) {\r\n            this.$message.success('删除成功')\r\n          } else {\r\n            this.$message.error(res.data.msg)\r\n          }\r\n        })\r\n      }, \r\n\r\n    },\r\n      \r\n  }\r\n</script>\r\n\r\n<style>\r\n\r\n\r\n</style>\r\n  \r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}